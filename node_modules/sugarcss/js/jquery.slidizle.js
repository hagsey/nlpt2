!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function($){function Slidizle(a,b){this.settings={classes:{content:"slidizle-content",next:"slidizle-next",previous:"slidizle-previous",beforeActive:"before-active",afterActive:"after-active",nextActive:"next",previousActive:"previous",forward:"forward",backward:"backward",navigation:"slidizle-navigation",timer:"slidizle-timer",slide:"slidizle-slide",disabled:"disabled",first:"first",last:"last",play:"played",pause:"paused",stop:"stoped",slider:"slidizle",active:"active",loading:"loading"},timeout:null,pauseOnHover:!1,nextOnClick:!1,loop:!1,autoPlay:!0,keyboardEnabled:!0,touchEnabled:!0,loadBeforeTransition:!0,disabled:!1,onInit:null,onClick:null,beforeChange:null,onChange:null,afterChange:null,beforeLoading:null,onLoading:null,afterLoading:null,onNext:null,onPrevious:null,onPlay:null,onPause:null,onResume:null},this.$refs={slider:null,content:null,medias:null,nextSlide:null,previousSlide:null,currentSlide:null,beforeActiveSlides:null,afterActiveSlides:null,navigation:null,next:null,previous:null,current:null,timer:null},this.loadingProgress=0,this.current_timeout_time=0,this._internalTimer=null,this.timeout=null,this.previous_index=0,this.current_index=0,this.next_index=0,this._previous_active_index=0,this._isPlaying=!1,this._isPause=!1,this._isOver=!1,this.total=0,this.$this=$(a),this.clickEvent=navigator.userAgent.match(/mobile/gi)?"touchend":"click",this.init($(a),b)}return Slidizle.prototype.init=function(a,b){var c=this,d=a;d.hasClass(c.settings.classes.slider)||d.addClass(c.settings.classes.slider),c._extendSettings(b),c.$refs.slider=d,c.$refs.content=d.find("[data-slidizle-content]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==c.$this.get(0)}),c.$refs.navigation=d.find("[data-slidizle-navigation]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==c.$this.get(0)}),c.$refs.previous=d.find("[data-slidizle-previous]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==c.$this.get(0)}),c.$refs.next=d.find("[data-slidizle-next]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==c.$this.get(0)}),c.$refs.timer=d.find("[data-slidizle-timer]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==c.$this.get(0)}),c.$refs.content&&c.$refs.content.addClass(c.settings.classes.content),c.$refs.next&&c.$refs.next.addClass(c.settings.classes.next),c.$refs.previous&&c.$refs.previous.addClass(c.settings.classes.previous),c.$refs.navigation&&c.$refs.navigation.addClass(c.settings.classes.navigation),c.$refs.timer&&c.$refs.timer.addClass(c.settings.classes.timer);var e=c.$refs.content.children(":first-child");if(e.length>0){var f=e[0].nodeName.toLowerCase();c.$refs.medias=c.$refs.content.children(f)}if(d.addClass(c.settings.classes.slider),c.$refs.medias.filter(":first-child").addClass(c.settings.classes.first),c.$refs.medias.filter(":last-child").addClass(c.settings.classes.last),c.$refs.medias){c.$refs.medias.addClass(c.settings.classes.slide),c.$refs.medias.bind(c.clickEvent,function(a){d.trigger("slidizle.click",[c]),c.settings.onClick&&c.settings.onClick(c)}),c.total=c.$refs.medias.length,c.current_index=0,c.$refs.navigation.length>=1&&c._initNavigation(),c.initPreviousNextNavigation();var g=c.$refs.medias.filter(".active:first");g.length>=1&&(c.current_index=g.index()),c._updateSlidesRefs(),c.settings.pauseOnHover&&d.hover(function(a){c._isOver=!0,c.pause()},function(a){c._isOver=!1,c.resume()}),c.settings.keyboardEnabled&&"false"!=c.settings.keyboardEnabled&&c._initKeyboardNavigation(),c.settings.touchEnabled&&navigator.userAgent.match(/mobile/gi)&&c._initTouchNavigation(),c.settings.autoPlay&&c.$refs.medias.length>1&&c.play(),c.settings.nextOnClick&&c.$refs.content.bind("click",function(){c.next()}),c.settings.onInit&&c.settings.onInit(c),d.trigger("slidizle.init",[c]),c.$this.addClass(c.settings.classes.forward),c._changeMedias()}else c.settings.onInit&&c.settings.onInit(c),d.trigger("slidizle.init",[c])},Slidizle.prototype._initNavigation=function(){var a=this;a.$this;if(!a.$refs.navigation)return!1;if(a.total<=1&&a.$refs.navigation.hide(),a.$refs.navigation.children().length<=0)for(var b=a.$refs.navigation[0].nodeName.toLowerCase(),c="dl"==b?"dt":"ol"==b?"li":"ul"==b?"li":"div",d=0;d<a.total;d++)a.$refs.navigation.append("<"+c+">"+(d+1)+"</"+c+">");a.$refs.navigation.children().bind(a.clickEvent,function(b){var c=$(this),d=c.attr("data-slidizle-slide-id"),e=a.$refs.medias.filter('[data-slidizle-slide-id="'+d+'"]');if(a.previous_index=a.current_index,d&&e){var f=e.index();f!=a.current_index&&(a.current_index=f,a._changeMedias())}else $(this).index()!=a.current_index&&(a.current_index=$(this).index(),a._changeMedias());b.preventDefault()})},Slidizle.prototype._initKeyboardNavigation=function(){var a=this;a.$this;$(document).bind("keyup",function(b){switch(b.keyCode){case 39:a.next();break;case 37:a.previous()}})},Slidizle.prototype._initTouchNavigation=function(){var a,b,c=this;c.$this;$(document).bind("touchstart",function(c){a=c.originalEvent.touches[0].clientX,b=c.originalEvent.touches[0].clientY}),$(document).bind("touchmove",function(d){if(a&&b){var e=d.originalEvent.touches[0].clientX,f=d.originalEvent.touches[0].clientY,g=a-e,h=b-f;Math.abs(g)>Math.abs(h)&&(g>0?c.next():c.previous()),a=b=null}})},Slidizle.prototype.initPreviousNextNavigation=function(){var a=this;a.$this;a.$refs.previous&&(a.total>1&&a.$refs.previous.bind(a.clickEvent,function(){a.previous()}),a.total<=1&&a.$refs.previous.hide()),a.$refs.next&&(a.total>1&&a.$refs.next.bind(a.clickEvent,function(){a.next()}),a.total<=1&&a.$refs.next.hide())},Slidizle.prototype._pauseTimer=function(){var a=this;clearInterval(a._internalTimer)},Slidizle.prototype._stopTimer=function(){var a=this;clearInterval(a._internalTimer),a._resetTimer()},Slidizle.prototype._resetTimer=function(){var a=this;a.current_timeout_time=a.$refs.currentSlide.data("slidizle-timeout")||a.settings.timeout,a.total_timeout_time=a.$refs.currentSlide.data("slidizle-timeout")||a.settings.timeout},Slidizle.prototype._startTimer=function(){var a=this;a.$this;clearInterval(a._internalTimer),a._internalTimer=setInterval(function(){a.current_timeout_time-=10,a.current_timeout_time<=0&&a.next()},10)},Slidizle.prototype._changeMedias=function(){function a(){b.$refs.previousActiveSlide&&b.$this.removeClass("slide-"+b.$refs.previousActiveSlide.index()),b.$this.addClass("slide-"+b.$refs.currentSlide.index()),b.isLast()?b.$this.addClass(b.settings.classes.last):b.$this.removeClass(b.settings.classes.last),b.isFirst()?b.$this.addClass(b.settings.classes.first):b.$this.removeClass(b.settings.classes.first),b.$refs.previousActiveSlide&&b.$this.removeClass("loaded-slide-"+b.$refs.previousActiveSlide.index()),b.$this.addClass("loaded-slide-"+b.$refs.currentSlide.index()),b.$refs.medias.removeClass(b.settings.classes.active),b.$refs.currentSlide.addClass(b.settings.classes.active),b.$refs.medias.removeClass(b.settings.classes.beforeActive).removeClass(b.settings.classes.afterActive),b.getBeforeActiveSlides().addClass(b.settings.classes.beforeActive),b.getAfterActiveSlides().addClass(b.settings.classes.afterActive),b.$refs.medias.removeClass(b.settings.classes.previousActive).removeClass(b.settings.classes.nextActive),b.getPreviousSlide().addClass(b.settings.classes.previousActive),b.getNextSlide().addClass(b.settings.classes.nextActive),b.settings.onChange&&b.settings.onChange(b),c.trigger("slidizle.change",[b]),0==b.$refs.currentSlide.index()&&b.$refs.previousSlide?b.$refs.previousSlide.index()==b.$refs.medias.length-1?(b.settings.onNext&&b.settings.onNext(b),c.trigger("slidizle.next",[b])):(b.settings.onPrevious&&b.settings.onPrevious(b),c.trigger("slidizle.previous",[b])):b.$refs.currentSlide.index()==b.$refs.medias.length-1&&b.$refs.previousSlide?0==b.$refs.previousSlide.index()?(b.settings.onPrevious&&b.settings.onPrevious(b),c.trigger("slidizle.previous",[b])):(b.settings.onNext&&b.settings.onNext(b),c.trigger("slidizle.next",[b])):b.$refs.previousSlide?b.$refs.currentSlide.index()>b.$refs.previousSlide.index()?(b.settings.onNext&&b.settings.onNext(b),c.trigger("slidizle.next",[b])):(b.settings.onPrevious&&b.settings.onPrevious(b),c.trigger("slidizle.previous",[b])):(b.settings.onNext&&b.settings.onNext(b),c.trigger("slidizle.next",[b])),b.getTotalTimeout()&&!b._isOver&&b.isPlay()&&b._startTimer(),b.settings.afterChange&&b.settings.afterChange(b),c.trigger("slidizle.afterChange",[b])}var b=this,c=b.$this,d=b.settings.classes.disabled;b._updateSlidesRefs(),b.settings.beforeChange&&b.settings.beforeChange(b),c.trigger("slidizle.beforeChange",[b]),b._stopTimer(),b.$refs.next&&(b.isLast()&&!b.isLoop()?b.$refs.next.addClass(d):b.$refs.next.hasClass(d)&&b.$refs.next.removeClass(d)),b.$refs.previous&&(b.$refs.previous&&b.isFirst()&&!b.isLoop()?b.$refs.previous.addClass(d):b.$refs.previous.hasClass(d)&&b.$refs.previous.removeClass(d));var e=b.$refs.currentSlide.attr("data-slidizle-slide-id");b.$refs.navigation.each(function(){var a=$(this),c=$(this).children('[data-slidizle-slide-id="'+e+'"]');e&&c?(a.children().removeClass(b.settings.classes.active),c.addClass(b.settings.classes.active)):(a.children().removeClass(b.settings.classes.active),a.children(":eq("+b.current_index+")").addClass(b.settings.classes.active))}),b.$refs.slider.addClass(b.settings.classes.loading),b.$refs.currentSlide.addClass(b.settings.classes.loading),b.settings.loadBeforeTransition&&"false"!=b.settings.loadBeforeTransition?(b.settings.beforeLoading&&b.settings.beforeLoading(b),c.trigger("slidizle.beforeLoading",[b]),b._loadSlide(b.$refs.currentSlide,function(d){d.removeClass(b.settings.classes.loading),b.$refs.slider.removeClass(b.settings.classes.loading),b.settings.afterLoading&&b.settings.afterLoading(b),c.trigger("slidizle.afterLoading",[b]),a()})):a()},Slidizle.prototype._updateSlidesRefs=function(){var a=this,b=(a.$this,a.current_index||0),c=a.next_index||a.current_index+1<a.total?a.current_index+1:0,d=a.previous_index||a.current_index-1>=0?a.current_index-1:a.total-1;a.$refs.currentSlide&&(a.$refs.previousActiveSlide=a.$refs.currentSlide),a.$refs.previousSlide=a.$refs.content.children(":eq("+d+")"),a.$refs.currentSlide=a.$refs.content.children(":eq("+b+")"),a.$refs.nextSlide=a.$refs.content.children(":eq("+c+")"),a.$refs.beforeActiveSlides=a.$refs.medias.filter(":lt("+b+")"),a.$refs.afterActiveSlides=a.$refs.medias.filter(":gt("+b+")")},Slidizle.prototype._loadSlide=function(a,b){function c(){h++,d.loadingProgress=100/g.length*h,d.settings.onLoading&&d.settings.onLoading(d),e.trigger("slidizle.onLoading",[d]),h>=g.length&&b(f)}var d=this,e=d.$this,f=$(a),g=[],h=0,i=f.find("*:not(script)").filter(function(){return $(this).closest("[data-slidizle]").get(0)==d.$this.get(0)});return i=i.add(f),i.each(function(){var a,b=$(this);if("undefined"!=typeof b.attr("data-slidizle-preload-custom")&&b.attr("data-slidizle-preload-custom")!==!1)return void g.push({type:"custom",$elm:b});if(-1==b.css("background-image").indexOf("none")){var c=b.css("background-image");if(-1!=c.indexOf("url")){var d=c.match(/url\((.*?)\)/);a=d[1].replace(/\"/g,"")}}else"img"==b.get(0).nodeName.toLowerCase()&&"undefined"!=typeof b.attr("src")&&(a=b.attr("src"));a&&g.push({type:"image",url:a})}),g.length?($(g).each(function(a,b){switch(b.type){case"image":var d=new Image;$(d).load(function(){c()}).error(function(){c()}).attr("src",b.url);break;case"custom":b.$elm.bind("slidizle.loaded",function(a){c()})}}),void(d.loadingProgress=0)):void b(f)},Slidizle.prototype.play=function(){var a=this,b=a.$this;a.isDisabled()||!a._isPlaying&&a.getTotalTimeout()&&a.$refs.medias.length&&(a.$this.removeClass(a.settings.classes.pause),a.$this.removeClass(a.settings.classes.stop),a.$this.addClass(a.settings.classes.play),a._isPause=!1,a._isPlaying=!0,a._resetTimer(),a._startTimer(),a.settings.onPlay&&a.settings.onPlay(a),b.trigger("slidizle.play",[a]))},Slidizle.prototype.resume=function(){var a=this,b=a.$this;a.isDisabled()||a.isPause()&&(a.$this.removeClass(a.settings.classes.pause),a.$this.removeClass(a.settings.classes.stop),a.$this.addClass(a.settings.classes.play),a._startTimer(),a._isPause=!1,a._isPlaying=!0,a.settings.onResume&&a.settings.onResume(a),b.trigger("slidizle.resume",[a]))},Slidizle.prototype.pause=function(){var a=this,b=a.$this;a.isDisabled()||a.isPlay()&&(a.$this.removeClass(a.settings.classes.play),a.$this.removeClass(a.settings.classes.stop),a._isPause=!0,a._isPlaying=!1,a._pauseTimer(),a.$this.addClass(a.settings.classes.pause),a.settings.onPause&&a.settings.onPause(a),b.trigger("slidizle.pause",[a]))},Slidizle.prototype.stop=function(){var a=this,b=a.$this;a.isDisabled()||a.isPlay()&&(a.$this.removeClass(a.settings.classes.play),a.$this.removeClass(a.settings.classes.pause),a._isPause=!1,a._isPlaying=!1,a._stopTimer(),a.$this.addClass(a.settings.classes.stop),a.settings.onStop&&a.settings.onStop(a),b.trigger("slidizle.stop",[a]))},Slidizle.prototype.togglePlayPause=function(){var a=this;a.$this;a.isDisabled()||(a._isPlaying?a.pause():a.play())},Slidizle.prototype.next=function(){var a=this;a.$this,a.settings.classes.disabled;a.isDisabled()||(a.isLoop()||!a.isLast())&&(a.$this.removeClass(a.settings.classes.backward),a.$this.addClass(a.settings.classes.forward),a._previous_active_index=a.current_index,a.current_index=a.current_index+1<a.total?a.current_index+1:0,a.previous_index=a.current_index-1>=0?a.current_index-1:a.total-1,a.next_index=a.current_index+1<a.total?a.current_index+1:0,a._changeMedias())},Slidizle.prototype.previous=function(){var a=this;a.$this;a.isDisabled()||(a.isLoop()||!a.isFirst())&&(a.$this.removeClass(a.settings.classes.forward),a.$this.addClass(a.settings.classes.backward),a._previous_active_index=a.current_index,a.current_index=a.current_index-1<0?a.total-1:a.current_index-1,a.previous_index=a.current_index-1>=0?a.current_index-1:a.total-1,a.next_index=a.current_index+1<a.total?a.current_index+1:0,a._changeMedias())},Slidizle.prototype["goto"]=function(a){var b=this,c=(b.$this,null);if(!b.isDisabled()){if("string"==typeof a)if("."==a.substr(0,1)||"#"==a.substr(0,1))c=b.$refs.content.children(a);else{var d=b.$refs.medias.filter('[data-slidizle-slide-id="'+a+'"]');1==d.length?c=d:1==b.$refs.medias.filter("#"+a).length&&(c=b.$refs.medias.filter("#"+a))}else"number"==typeof a&&(c=b.$refs.medias.filter(":eq("+a+")"));c&&null!=c.index()&&(b.current_index=c.index(),b._changeMedias())}},Slidizle.prototype.gotoAndPlay=function(a){this.isDisabled()||(this.gotoSlide(a),this.play())},Slidizle.prototype.gotoAndStop=function(a){this.isDisabled()||(this.gotoSlide(a),this.stop())},Slidizle.prototype.getCurrentSlide=function(){return this.$refs.currentSlide},Slidizle.prototype.getActiveSlide=Slidizle.prototype.getCurrentSlide,Slidizle.prototype.getPreviousSlide=function(){return this.$refs.previousSlide},Slidizle.prototype.getNextSlide=function(){return this.$refs.nextSlide},Slidizle.prototype.getBeforeActiveSlides=function(){return this.$refs.beforeActiveSlides},Slidizle.prototype.getAfterActiveSlides=function(){return this.$refs.afterActiveSlides},Slidizle.prototype.getPreviousActiveSlide=function(){return this.$refs.previousActiveSlide},Slidizle.prototype.getAllSlides=function(){return this.$refs.medias},Slidizle.prototype.getSettings=function(){return this.settings},Slidizle.prototype.getLoadingProgress=function(){return this.loadingProgress},Slidizle.prototype.getRemainingTimeout=function(){return this.current_timeout_time},Slidizle.prototype.getCurrentTimeout=function(){var a=this.$refs.currentSlide.data("slidizle-timeout")||this.settings.timeout;return a?a-this.current_timeout_time:null},Slidizle.prototype.getTotalTimeout=function(){return this.total_timeout_time||this.settings.timeout||!1},Slidizle.prototype.isLast=function(){return this.getCurrentSlide().index()>=this.getAllSlides().length-1},Slidizle.prototype.isFirst=function(){return this.getCurrentSlide().index()<=0},Slidizle.prototype.isHover=function(){return this._isOver},Slidizle.prototype.isDisabled=function(){var a=!1;return a="function"==typeof this.settings.disabled?this.settings.disabled():this.settings.disabled,a?this.$this.addClass(this.settings.classes.disabled):this.$this.removeClass(this.settings.classes.disabled),a},Slidizle.prototype.isLoop=function(){var a=this.settings.loop;return a&&"false"!=a},Slidizle.prototype.isPlay=function(){return this._isPlaying},Slidizle.prototype.isPause=function(){return this._isPause},Slidizle.prototype.isStop=function(){return!this._isPlaying&&!this._isPause},Slidizle.prototype._extendSettings=function(options){var _this=this,$this=_this.$this;_this.settings=$.extend(_this.settings,options,!0);var flattenObject=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c))if("object"==typeof a[c]&&null!=a[c]){var d=flattenObject(a[c]);for(var e in d)d.hasOwnProperty(e)&&(b[c+"."+e]=d[e])}else b[c]=a[c];return b},flatSettings=flattenObject(_this.settings);for(var name in flatSettings){var inline_setting="slidizle-"+name.replace(".","-").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),inline_attr=$this.data(inline_setting);"undefined"!=typeof inline_attr&&("number"==typeof inline_attr||"boolean"==typeof inline_attr?eval("_this.settings."+name+" = "+inline_attr):eval("_this.settings."+name+' = "'+inline_attr+'"'))}},$.fn.slidizle=function(a){if(Slidizle.prototype[a]){var b=Array.prototype.slice.call(arguments,1);this.each(function(){var c=$(this).data("slidizle_api");c[a].apply(c,b)})}else if("object"!=typeof a&&a)$.error("Method "+a+" does not exist on jQuery.slidizle");else{var b=Array.prototype.slice.call(arguments);this.each(function(){if($this=$(this),null==$this.data("slidizle_api")||""==$this.data("slidizle_api")){var a=new Slidizle($this,b[0]);$this.data("slidizle_api",a)}})}return this},Slidizle});